### Получение списка SMS сообщений
{{EXAMPLE_QUERY}}

Данный метод позволяет получить список созданных SMS-сообщений. 

Поиск может быть осуществлен по [ID](/ru/help/api-docs/other#glossary-id) и данным из полей кампании.

#### Параметры запроса

 Параметр        | Тип     | Описание
-----------------|---------|-----------
`criteria`       | array   | Критерии поиска (см. таблицу [Критерии поиска](#list-criteria)).
`pagination`     | array   | Параметры постраничного вывода (см. таблицу [Параметры постраничного вывода](#list-pagination)).
`sort`           | array   | Параметры сортировки (см. таблицу [Параметры сортировки](#list-sort)).
`withNumberInfo` | integer | Данный параметр позволяет получить от сервера дополнительную информацию о номере получателя, такую как «страна» и «оператор».<br>Возможные значения:<br>**0** – не получать (установлено по умолчанию);<br>**1** – получать.

#### <span data-anchor="list-criteria">Критерии поиска</span>

Информация о полях SMS-сообщения, по которым осуществляется поиск. 
Для поиска можно использовать как одно поле, так и несколько полей одновременно.


 Параметр                     | Тип     | Описание
------------------------------|---------|-----------
`criteria[campaignIds]`         | array \ string | Поиск по идентификаторам кампаний.<br>Параметр должен быть передан в виде массива или строки идентификаторов, разделенных запятыми.<br>Максимальное количество идентификаторов – 100, при превышении этого лимита поиск будет происходить по первым 100 [ID](/ru/help/api-docs/other#glossary-id) из списка.
`criteria[from]`        | string | Поиск по [подписи отправителя](/ru/help/api-docs/other#glossary-sender-id).<br>Поиск проходит по подписи отправителя, которая была создана в кампании.
`criteria[to]`       | string   | Поиск по номеру телефона получателя.<br>Разрешен поиск как по целому номеру, так и по его части.<br>Например:<br>`{widget:example-phone}` – найдет все кампании, в которых участвовал этот номер;<br>`38097` – будут найдены все кампании с номерами, содержащими указанную комбинацию цифр.<br>В поиске может участвовать только один номер.
`criteria[text]`              | string  | Поиск по тексту сообщения кампании.<br>Осуществляется по принципу полного соответствия искомого значения. 
`criteria[status]`                | integer | Поиск по [статусу сообщения](/ru/help/api-docs/other#SmsStatus).
`criteria[groups]`              | string  | Поиск по идентификаторам [контактных групп](/ru/help/contact-book/contact-groups), используемым в кампании.<br>Параметр должен быть передан в виде массива или строки идентификаторов, разделенных запятыми.
`criteria[campaignStatus]`            | string | Поиск по [статусу кампании](/ru/help/api-docs/campaign#list-campaign-statuses) SMS-сообщения.
`criteria[campaignCreateTsFrom]`            | string  | Поиск по дате и времени создания кампаний, начиная с указанной даты и времени.<br>Формат: `ГГГГ-ММ-ДД   ЧЧ:ММ:СС`.
`criteria[campaignCreateTsTo]` | string | Поиск по дате и времени создания кампаний до указанной даты и времени.<br>Формат: `ГГГГ-ММ-ДД   ЧЧ:ММ:СС`.
`criteria[campaignSentTsFrom]` | string | Поиск по дате и времени отправленных кампаний, начиная с указанной даты и времени.<br>Формат: `ГГГГ-ММ-ДД   ЧЧ:ММ:СС`.
`criteria[campaignSentTsTo]` | string | Поиск по дате и времени отправленных кампаний до указанной даты и времени.<br>Формат: `ГГГГ-ММ-ДД   ЧЧ:ММ:СС`.
`criteria[startSendTsFrom]` | string | Поиск по дате и времени отправленных сообщений, начиная с указанной даты и времени.<br>Формат: `ГГГГ-ММ-ДД   ЧЧ:ММ:СС`.
`criteria[startSendTsTo]` | string | Поиск по дате и времени отправленных сообщений до указанной даты и времени.<br>Формат: `ГГГГ-ММ-ДД   ЧЧ:ММ:СС`.
`criteria[statusUpdateTsFrom]` | string | Поиск по дате и времени сообщений, статус которых был изменен, начиная с указанных даты и времени.<br>Формат: `ГГГГ-ММ-ДД   ЧЧ:ММ:СС`.
`criteria[statusUpdateTsTo]` | string | Поиск по дате и времени сообщений, статус которых был изменен до указанных даты и времени.<br>Формат: `ГГГГ-ММ-ДД   ЧЧ:ММ:СС`.


### <span data-anchor="list-pagination">Параметры постраничного вывода</span>

Данные параметры созданы для структурированного (частичного) вывода запрашиваемой информации.

 Параметр                 | Тип     | Описание
--------------------------|---------|-----------
`pagination[pageSize]`    | integer | Количество отображаемых элементов на странице (25, 50, 100).
`pagination[currentPage]` | integer | Текущая страница <br>Нумерация страниц начинается с 0.


### <span data-anchor="list-sort">Параметры сортировки</span>

С помощью данных параметров можно отсортировать результаты поиска по одному из полей в порядке возрастания (ASC) или убывания (DESC). 

Например: 

Сортировка по номеру получателя по возрастанию – `sort[to]`: ASC.

Сортировка по статусу сообщения по убыванию – `sort[status]`: DESC.

 Параметр                 | Описание
--------------------------|---------
`sort[campaignId]`        | Сортировка по идентификатору кампании.
`sort[from]`              | Сортировка по подписи отправителя.
`sort[to]`                | Сортировка по номеру получателя.
`sort[text]`              | Сортировка по тексту.
`sort[status]`            | Сортировка по статусу сообщения.
`sort[startSendTs]`            | Сортировка по времени отправки. 
`sort[statusUpdateTs]` | Сортировка по обновлению статуса.
`sort[segNum]` | Сортировка по количеству сегментов.


### Ответ сервера

Массив данных:

 Поле            | Тип     | Описание
-----------------|---------|-----------
`items`          | array   | Список найденных сообщений (см. таблицу [Список сообщений](#list-items)).
`totalItemCount` | integer | Общее количество найденных элементов.


##### <span data-anchor="list-items">Список сообщений</span>

Каждое из сообщений содержит поля:

 Поле               | Тип     | Описание
--------------------|---------|-----------
`id`                | integer | Идентификатор сообщения.
`campaignId`        | integer | Идентификатор кампании сообщения.
`segNum`            | integer | Количество сегментов.
`segUserBuy`        | float   | Стоимость сегмента сообщения для пользователя <br>Указывается в валюте пользователя.
`from`              | string  | [Подпись отправителя](/ru/help/api-docs/other#glossary-sender-id).
`to`                | string  | Номер получателя.
`text`              | string  | Текст сообщения.
`status`            | string  | Статус сообщения (см. таблицу [Список возможных статусов сообщений](/ru/help/api-docs/other#SmsStatus)).
`groups`            | string  | Идентификаторы [контактных групп](/ru/help/contact-book/contact-groups), в которые входил номер получателя на момент создания кампании.
`uuid`              | string  | Внутренний идентификатор сообщения.
`countryA2`         | string  | Код страны получателя в формате ISO-3166 alpha2.
`operatorName`      | string  | Название оператора получателя.
`startSendTs`      | date  | Дата и время отправки сообщения.<br>Формат: `ГГГГ-ММ-ДД ЧЧ-ММ-СС`.
`statusUpdateTs`      | date  | Дата и время последнего обновления статуса сообщения.<br>Формат: `ГГГГ-ММ-ДД ЧЧ-ММ-СС`.
